<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">

<h:head>
	<title>Web app ok</title>
</h:head>
<h:body>

	<h:form id="formTarefa">

		<h:dataTable value="#{tarefaBean.tarefas}" var="tarefa"
			styleClass="order-table" headerClass="order-table-header"
			rowClasses="order-table-odd-row,order-table-even-row">

			<h:column>

				<f:facet name="header">Concluído</f:facet>

				<h:selectBooleanCheckbox value="#{tarefa.concluido}" size="10"
					disabled="#{!tarefa.editar}" />

			</h:column>

			<h:column>

				<f:facet name="header">Descrição</f:facet>

				<h:inputText value="#{tarefa.descricao}" size="20"
					disabled="#{!tarefa.editar}" />

			</h:column>

			<h:column>

				<f:facet name="header">Valor Recorrente</f:facet>

				<h:selectBooleanCheckbox value="#{tarefa.mesmoValorRecorrente}"
					size="10" disabled="#{!tarefa.editar}" />


			</h:column>

			<h:column>

				<f:facet name="header">Recorrencia</f:facet>

				<h:inputText value="#{tarefa.recorrencia.descricao}" size="30"
					disabled="#{!tarefa.editar}" />

			</h:column>

			<h:column>

				<f:facet name="header">Valor atividade</f:facet>

				<h:inputText value="#{tarefa.valorAtividade}" size="5"
					disabled="#{!tarefa.editar}" />

			</h:column>

			<h:column>

				<f:facet name="header">Data limite</f:facet>

				    		<h:outputText value="#{user.data}"> <f:convertDateTime pattern="dd/MM/yyyy"/> </h:outputText>		
				<h:inputText value="#{tarefa.dataLimiteTarefa}" size="5"
					disabled="#{!tarefa.editar}">
					<f:convertDateTime pattern="dd/MM/yyy" />
				</h:inputText>

			</h:column>

			<h:column>
				<f:facet name="header">Ações</f:facet>
				<h:commandButton value="Salvar" rendered="#{tarefa.editar}" immediate="true"  >
					<f:attribute name="tarefa" value="tarefa" />
				        <f:ajax listener="#{tarefaBean.editarTarefa}" execute="formTarefa" render="@all" />       
				</h:commandButton>
				<h:commandButton value="Editar"  rendered="#{!tarefa.editar}" immediate="true" >
					<f:attribute name="tarefa" value="tarefa" />
				        <f:ajax event="click" listener="#{tarefaBean.habilitarEdicaoTarefa}" execute="formTarefa"/>       
				</h:commandButton>
				<h:commandButton value="Excluir" action="#{tarefaBean.removerTarefa(tarefa)}" />
			</h:column>


		</h:dataTable>

    	  <h:commandButton value="Save Changes" action="#{tarefaBean.adicionarTarefa}" />

	</h:form>


</h:body>
</html>